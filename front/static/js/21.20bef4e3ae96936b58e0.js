webpackJsonp([21],{187:function(e,o,t){t(316);var n=t(73)(t(241),t(359),null,null);e.exports=n.exports},221:function(e,o,t){e.exports={default:t(222),__esModule:!0}},222:function(e,o,t){var n=t(10),l=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return l.stringify.apply(l,arguments)}},241:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t(221),l=t.n(n);o.default={name:"hello",data:function(){return{ruleForm:{password:""},rules:{password:[{validator:function(e,o,t){if(""===o)t(new Error("请输入密码"));else{/^(\w){6,19}$/.exec(o)?t():t(new Error("至少6位不包含空格及特殊符号的密码"))}},trigger:"blur"}]},state:!1,userInfo:{name:"",id:""},teachingInfo:"",subjectInfo:"",gradeList:[],currentGradeId:"",selectSubject:[],roleId:"",needResetPassword:!1,schoolLength:"",schoolList:[],schoolListIsShow:!1,chooseSchoolId:"",needChooseObject:!1,headTeacherClassList:[],headTeacherClassShow:!1}},mounted:function(){var e=this;e.$ajax("next").then(function(o){if(console.log(o),200==o.code){e.userInfo.name=o.data.name,e.userInfo.id=o.data.teacherId,e.needResetPassword=o.data.needResetPassword,e.schoolLength=o.data.schools.length,e.schoolList=o.data.schools;if(e.schoolLength>1)e.schoolListIsShow=!0;else if(e.schoolLength<=0){if(e.schoolListIsShow=!1,e.needChooseObject=!1,e.roleId=o.data.topRole.roleId,32==e.roleId){var t=e.userInfo;t.roleId=e.roleId,t=l()(t),localStorage.setItem("userInfo",t),e.$router.push("/home")}else if(4==e.roleId){var t=e.userInfo;t.roleId=e.roleId,t.education=o.data.education,t=l()(t),localStorage.setItem("userInfo",t),e.$router.push("/home")}}else if(e.schoolListIsShow=!1,e.needChooseObject=o.data.schools[0].needChooseObject,e.roleId=o.data.topRole.roleId,1==e.schoolLength&&0==e.needChooseObject)if(1==e.roleId)e.headTeacherClassShow=!0;else{var t=e.userInfo;t.roleId=e.roleId,t.schools=o.data.schools[0],t=l()(t),localStorage.setItem("userInfo",t),e.$router.push("/home")}else if(1==e.schoolLength&&1==e.needChooseObject)if(1==e.needChooseObject)e.$ajax("teacher/findTeachingBySchoolId",{schoolId:1}).then(function(o){200==o.code?(e.gradeList=o.data,e.currentGradeId=o.data[0]):e.$alert(o.message,"提示",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(e){console.log(e)});else if(1==e.roleId)e.$ajax("headteacher/classes",{schoolId:e.chooseSchoolId,teacherId:e.userInfo.id}).then(function(o){if(200==o.code)if(e.headTeacherClassList=o.data,o.data.length>1)$this.needChooseObject=!1,$this.headTeacherClassShow=!0;else{var t=e.userInfo;t.roleId=e.roleId,t.schoolId=e.chooseSchoolId,t.classInfo=o.data[0],t=l()(t),localStorage.setItem("userInfo",t),e.$router.push("/home")}else e.$alert(o.message,"提示",{confirmButtonText:"确定",callback:function(e){}});console.log(o)}).catch(function(e){console.log(e)});else if(8==e.roleId&&16==e.roleId){var t=e.userInfo;t.roleId=e.roleId,t.schoolId=e.chooseSchoolId,t=l()(t),localStorage.setItem("userInfo",t),e.$router.push("/home")}else if(2==e.roleId){var t=e.userInfo;t.roleId=e.roleId,t.schoolId=e.chooseSchoolId,t=l()(t),localStorage.setItem("userInfo",t),e.$router.push("/home")}}else e.$alert(o.message,"提示",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(e){console.log(e)})},methods:{submitForm:function(e){var o=this;o.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;o.$ajax("password/change",o.ruleForm).then(function(e){e.code,o.$alert(e.message,"提示",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(e){console.log(e)})})},skip:function(){this.needResetPassword=!1},selectSchool:function(e){console.log(e);var o=this;if(this.schoolListIsShow=!1,this.needChooseObject=e.needChooseObject,this.chooseSchoolId=e.schoolId,o.roleId=e.schoolTopRole.roleId,1==this.needChooseObject)o.$ajax("teacher/findTeachingBySchoolId",{schoolId:1}).then(function(e){200==e.code?(o.gradeList=e.data,o.currentGradeId=e.data[0]):o.$alert(e.message,"提示",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(e){console.log(e)});else if(1==o.roleId)o.$ajax("headteacher/classes",{schoolId:o.chooseSchoolId,teacherId:o.userInfo.id}).then(function(e){if(200==e.code)if(o.headTeacherClassList=e.data,e.data.length>1)$this.needChooseObject=!1,$this.headTeacherClassShow=!0;else{var t=o.userInfo;t.roleId=o.roleId,t.schoolId=o.chooseSchoolId,t.classInfo=e.data[0],t=l()(t),localStorage.setItem("userInfo",t),o.$router.push("/home")}else o.$alert(e.message,"提示",{confirmButtonText:"确定",callback:function(e){}});console.log(e)}).catch(function(e){console.log(e)});else if(8==o.roleId&&16==o.roleId){var t=o.userInfo;t.roleId=o.roleId,t.schoolId=o.chooseSchoolId,t=l()(t),localStorage.setItem("userInfo",t),o.$router.push("/home")}else if(2==o.roleId){var t=o.userInfo;t.roleId=o.roleId,t.schoolId=o.chooseSchoolId,t=l()(t),localStorage.setItem("userInfo",t),o.$router.push("/home")}},getCurrentGradeId:function(e){},getTarget:function(e,o,t){var n=this,l=o;if(""==o.teachingInfo.teacherName){l.classId=e.classId,l.className=e.className,l.gradeId=this.currentGradeId.gradeId,l.gradeName=this.currentGradeId.gradeName;""==t.target.innerHTML&&"TD"==t.target.tagName?(t.target.innerHTML='<i class="el-icon-circle-check queryRight"></i>',this.selectSubject.push(l)):"I"==t.target.tagName?(t.target.parentNode.innerHTML="",this.selectSubject.forEach(function(e,o){e==l&&n.selectSubject.splice(o,1)})):(t.target.innerHTML="",this.selectSubject.forEach(function(e,o){e==l&&n.selectSubject.splice(o,1)}))}},submitSubject:function(){var e=this,o=[],t=this;""!=this.selectSubject&&this.selectSubject.length>0?(this.selectSubject.forEach(function(t,n){var l=new Object;l.classId=t.classId,l.subjectId=t.subjectId,l.teacherId=e.userInfo.id,o.push(l)}),o=l()(o),this.$ajax("teacher/bitchSaveClassTeacherSubject",{data:o}).then(function(e){200==e.code?t.$alert(e.message,"提示",{confirmButtonText:"确定",callback:function(e){t.judgeTeacher()}}):t.$alert(e.message,"提示",{confirmButtonText:"确定",callback:function(e){}})}).catch(function(e){console.log(e)})):this.$alert("请选择任课学科后再点击保存","提示",{confirmButtonText:"确定",callback:function(e){}})},judgeTeacher:function(){if(1==this.roleId){var e=this;this.$ajax("headteacher/classes",{schoolId:e.chooseSchoolId,teacherId:e.userInfo.id}).then(function(o){if(200==o.code)if(e.headTeacherClassList=o.data,o.data.length>1)e.needChooseObject=!1,e.headTeacherClassShow=!0;else{var t=e.userInfo;t.roleId=e.roleId,t.schoolId=e.chooseSchoolId,t.classInfo=o.data[0],t=l()(t),localStorage.setItem("userInfo",t),e.$router.push("/home")}else e.$alert(o.message,"提示",{confirmButtonText:"确定",callback:function(e){}});console.log(o)}).catch(function(e){console.log(e)})}else{var o=this.userInfo;o.roleId=this.roleId,o.schoolId=this.chooseSchoolId,o=l()(o),localStorage.setItem("userInfo",o),this.$router.push("/home")}},skipSubject:function(){this.judgeTeacher()},selectClass:function(e){var o=this.userInfo;o.roleId=this.roleId,o.schoolId=this.chooseSchoolId,o.classInfo=e,o=l()(o),localStorage.setItem("userInfo",o),this.$router.push("/home")}}}},278:function(e,o,t){o=e.exports=t(182)(),o.push([e.i,".hello .login-wrap{margin:0 auto}.hello .nav_container{width:100%;height:auto;position:relative;z-index:100;background:#fff}.hello .nav-centre{width:1024px;height:80px;background:#fff;margin:0 auto;overflow:hidden}.hello .nav_container img{width:150px;height:38px;margin-top:21px;float:left;margin-right:57px}.hello .contentBody{padding-top:80px;width:1024px;min-height:774px;background:#fff;border-top:5px solid #0c9ee9;margin:0 auto;text-align:center}.hello .ms-login{display:inline-block;width:280px;height:230px;padding:40px 30px 40px 14px;border-radius:5px;background:#fff}.hello .login-btn{margin-top:40px;text-align:right}.hello .loginBtn button{width:100%}.hello .login-btn button{width:30%;height:36px;margin-right:11px}.hello .pageTwo table{width:100%;text-align:center}.hello .pageTwo table th{text-align:center}.hello .gradeWrap{text-align:left}.hello .gradeWrap ul{display:inline-block;margin:20px 0}.hello .gradeWrap li{margin:0 5px;display:inline-block;width:100px;height:35px;line-height:35px;border:1px solid grey;border-radius:5px;text-align:center;cursor:pointer}.hello .gradeWrap li:hover{background:#add8e6;color:#fff;border:1px solid transparent}.hello .gradeWrap li.active{background:#6495ed;color:#fff;border:1px solid transparent}.hello .subjectMgt-body{margin-top:10px}.hello .subjectMgt-body table{width:100%;text-align:center}.hello .subjectMgt-body table th{text-align:center}.hello .subjectMgt-body table td,.hello .subjectMgt-body table th{padding:0;box-sizing:border-box;border:1px solid #dfe6ec;height:40px}.hello .teacherName{display:inline-block;width:100%;height:35px;line-height:35px}.hello .teacherName>i{color:brown}.hello .schoolSelect>ul{margin-top:30px;text-align:center}.hello .schoolNameStyle{display:block;height:35px;color:grey;line-height:35px;border-radius:10px;width:30%;margin:20px 35%;cursor:pointer;border:1px solid gray}.hello .schoolNameStyle:hover{color:#007dc4;border:1px solid #0c9ee9}.hello .queryRight{color:brown}.hello .AllowClick{cursor:pointer}","",{version:3,sources:["E:/works/platform/yitai-educational/src/main/webapp/src/pages/components/loginCheck.vue"],names:[],mappings:"AACA,mBACE,aAAe,CAChB,AACD,sBACE,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,YAAa,AACb,eAAiB,CAClB,AACD,mBACE,aAAc,AACd,YAAa,AACb,gBAAiB,AACjB,cAAe,AACf,eAAiB,CAClB,AACD,0BACE,YAAa,AACb,YAAa,AACb,gBAAiB,AACjB,WAAY,AACZ,iBAAmB,CACpB,AACD,oBACE,iBAAkB,AAClB,aAAc,AACd,iBAAkB,AAClB,gBAAoB,AACpB,6BAA8B,AAC9B,cAAgB,AAChB,iBAAmB,CACpB,AACD,iBACE,qBAAsB,AACtB,YAAY,AACZ,aAAa,AACb,4BAA4B,AAC5B,kBAAmB,AACnB,eAAiB,CAClB,AACD,kBACE,gBAAiB,AACjB,gBAAkB,CACnB,AACD,wBACE,UAAY,CACb,AACD,yBACE,UAAU,AACV,YAAY,AACZ,iBAAmB,CACpB,AACD,sBACE,WAAY,AACZ,iBAAmB,CACpB,AACD,yBACE,iBAAmB,CACpB,AACD,kBACE,eAAiB,CAClB,AACD,qBACE,qBAAsB,AACtB,aAAe,CAChB,AACD,qBACE,aAAc,AACd,qBAAsB,AACtB,YAAa,AACb,YAAa,AACb,iBAAkB,AAClB,sBAAuB,AACvB,kBAAmB,AACnB,kBAAmB,AACnB,cAAgB,CACjB,AACD,2BACE,mBAAsB,AACtB,WAAa,AACb,4BAAgC,CACjC,AACD,4BACE,mBAA2B,AAC3B,WAAa,AACb,4BAAgC,CACjC,AACD,wBACE,eAAiB,CAClB,AACD,8BACE,WAAY,AACZ,iBAAmB,CACpB,AACD,iCACE,iBAAmB,CACpB,AACD,kEAEE,UAAW,AACX,sBAAuB,AACvB,yBAA0B,AAC1B,WAAa,CACd,AACD,oBACE,qBAAsB,AACtB,WAAY,AACZ,YAAa,AACb,gBAAkB,CACnB,AACD,sBACE,WAAa,CACd,AACD,wBACE,gBAAiB,AACjB,iBAAmB,CACpB,AACD,wBACE,cAAe,AACf,YAAa,AACb,WAAY,AACZ,iBAAkB,AAClB,mBAAoB,AACpB,UAAW,AACX,gBAAiB,AACjB,eAAgB,AAChB,qBAAuB,CACxB,AACD,8BACE,cAAe,AACf,wBAA0B,CAC3B,AACD,mBACE,WAAa,CACd,AACD,mBACE,cAAgB,CACjB",file:"loginCheck.vue",sourcesContent:["\n.hello .login-wrap{\n  margin: 0 auto;\n}\n.hello .nav_container {\n  width: 100%;\n  height: auto;\n  position: relative;\n  z-index: 100;\n  background: #fff;\n}\n.hello .nav-centre {\n  width: 1024px;\n  height: 80px;\n  background: #fff;\n  margin: 0 auto;\n  overflow: hidden;\n}\n.hello .nav_container img {\n  width: 150px;\n  height: 38px;\n  margin-top: 21px;\n  float: left;\n  margin-right: 57px;\n}\n.hello .contentBody {\n  padding-top: 80px;\n  width: 1024px;\n  min-height: 774px;\n  background: #ffffff;\n  border-top: 5px solid #0C9EE9;\n  margin:  0 auto;\n  text-align: center;\n}\n.hello .ms-login{\n  display: inline-block;\n  width:280px;\n  height:230px;\n  padding:40px 30px 40px 14px;\n  border-radius: 5px;\n  background: #fff;\n}\n.hello .login-btn{\n  margin-top: 40px;\n  text-align: right;\n}\n.hello .loginBtn button{\n  width: 100%;\n}\n.hello .login-btn button{\n  width:30%;\n  height:36px;\n  margin-right: 11px;\n}\n.hello .pageTwo table {\n  width: 100%;\n  text-align: center;\n}\n.hello .pageTwo table th {\n  text-align: center;\n}\n.hello .gradeWrap {\n  text-align: left;\n}\n.hello .gradeWrap ul {\n  display: inline-block;\n  margin: 20px 0;\n}\n.hello .gradeWrap li {\n  margin: 0 5px;\n  display: inline-block;\n  width: 100px;\n  height: 35px;\n  line-height: 35px;\n  border: 1px solid grey;\n  border-radius: 5px;\n  text-align: center;\n  cursor: pointer;\n}\n.hello .gradeWrap li:hover {\n  background: lightblue;\n  color: white;\n  border: 1px solid rgba(0,0,0,0);\n}\n.hello .gradeWrap li.active {\n  background: cornflowerblue;\n  color: white;\n  border: 1px solid rgba(0,0,0,0);\n}\n.hello .subjectMgt-body{\n  margin-top: 10px;\n}\n.hello .subjectMgt-body table{\n  width: 100%;\n  text-align: center;\n}\n.hello .subjectMgt-body table th{\n  text-align: center;\n}\n.hello .subjectMgt-body table th,\n.hello .subjectMgt-body table td{\n  padding: 0;\n  box-sizing: border-box;\n  border: 1px solid #dfe6ec;\n  height: 40px;\n}\n.hello .teacherName {\n  display: inline-block;\n  width: 100%;\n  height: 35px;\n  line-height: 35px;\n}\n.hello .teacherName >i {\n  color: brown;\n}\n.hello .schoolSelect >ul {\n  margin-top: 30px;\n  text-align: center;\n}\n.hello .schoolNameStyle {\n  display: block;\n  height: 35px;\n  color: grey;\n  line-height: 35px;\n  border-radius: 10px;\n  width: 30%;\n  margin: 20px 35%;\n  cursor: pointer;\n  border: 1px solid gray;\n}\n.hello .schoolNameStyle:hover{\n  color: #007dc4;\n  border: 1px solid #0C9EE9;\n}\n.hello .queryRight{\n  color: brown;\n}\n.hello .AllowClick {\n  cursor: pointer;\n}\n\n"],sourceRoot:""}])},316:function(e,o,t){var n=t(278);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t(183)("65299d26",n,!0)},359:function(e,o){e.exports={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"hello"},[t("div",{staticClass:"login-wrap"},[e._m(0),e._v(" "),t("div",{staticClass:"contentBody"},[e.needResetPassword?t("div",{staticClass:"resetPass"},[t("div",{staticClass:"ms-login"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"75px"}},[t("el-form-item",{attrs:{prop:"password",label:"设置密码:"}},[t("el-input",{attrs:{maxlength:18,placeholder:"密码"},model:{value:e.ruleForm.password,callback:function(o){e.ruleForm.password=o},expression:"ruleForm.password"}})],1),e._v(" "),t("div",{staticClass:"login-btn"},[t("el-button",{staticClass:"primary",attrs:{type:"primary",disabled:e.state},on:{click:function(o){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),t("el-button",{attrs:{type:"text"},on:{click:function(o){e.skip()}}},[e._v("跳过")])],1)],1)],1)]):e.schoolListIsShow?t("div",{staticClass:"schoolSelect"},[t("h3",[e._v("请选择一个学校登录操作")]),e._v(" "),t("ul",e._l(e.schoolList,function(o){return t("li",{staticClass:"schoolNameStyle",on:{click:function(t){e.selectSchool(o)}}},[e._v(e._s(o.schoolName))])}))]):e.needChooseObject?t("div",{staticClass:"teachingMsg"},[t("div",[t("el-radio-group",{on:{change:function(o){e.getCurrentGradeId(e.currentGradeId)}},model:{value:e.currentGradeId,callback:function(o){e.currentGradeId=o},expression:"currentGradeId"}},e._l(e.gradeList,function(o,n){return t("el-radio-button",{key:n,attrs:{label:o}},[e._v(" "+e._s(o.gradeName)+" ")])}))],1),e._v(" "),t("div",e._l(e.gradeList,function(o,n){return t("table",{directives:[{name:"show",rawName:"v-show",value:o.gradeId==e.currentGradeId.gradeId,expression:"item.gradeId == currentGradeId.gradeId"}],attrs:{border:"1"}},[t("tr",[t("th",[e._v("班级")]),e._v(" "),e._l(o.classInfo[0].subjectInfo,function(o){return t("th",[e._v(e._s(o.subjectName))])})],2),e._v(" "),e._l(o.classInfo,function(o){return t("tr",[e._l(o,function(n){return n==o.className?t("td",[e._v(e._s(n))]):e._e()}),e._v(" "),e._l(o.subjectInfo,function(n){return t("td",{class:""==n.teachingInfo.teacherName?"AllowClick":"",on:{click:function(t){e.getTarget(o,n,t)}}},[e._v(e._s(n.teachingInfo.teacherName))])})],2)})],2)})),e._v(" "),t("div",[t("ul",e._l(e.selectSubject,function(o){return t("li",[e._v(e._s(o.gradeName)+"\n                "),t("span",[e._v(e._s(o.className)+"（"+e._s(o.subjectName)+"）")])])})),e._v(" "),t("div",[t("el-button",{staticClass:"primary",attrs:{type:"primary",disabled:e.state},on:{click:e.submitSubject}},[e._v("保存")]),e._v(" "),t("el-button",{attrs:{type:"text"},on:{click:e.skipSubject}},[e._v("跳过")])],1)])]):e.headTeacherClassShow?t("div",[t("h3",[e._v("请选择一个班级登录操作")]),e._v(" "),t("ul",e._l(e.headTeacherClassList,function(o){return t("li",{staticClass:"schoolNameStyle",on:{click:function(t){e.selectClass(o)}}},[e._v(e._s(o.gradeName)+"（"+e._s(o.className)+"）")])}))]):e._e()])])])},staticRenderFns:[function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"nav_container"},[t("div",{staticClass:"nav-centre"},[t("img",{attrs:{src:"http://res.yujingceping.com/res/resources/front/imgs/Logo.png"}})])])}]}}});
//# sourceMappingURL=21.20bef4e3ae96936b58e0.js.map