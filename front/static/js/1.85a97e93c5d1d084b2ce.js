webpackJsonp([1],{266:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),__webpack_exports__.default={name:"scoreManagement",data:function(){return{tableData3:[],allSelectMsg:[],multipleSelection:[],yearTime:"2017-2018学年",datas:[],gradeList:[],value:"",active:"0",param:{},tableMsg:[],grades:{scoreList:[]}}},mounted:function(){var e=this;this.$ajax("schadmin/findScoreClassByCondition?schoolId=114").then(function(t){e.tableData3=t.data.datas[0].grades[0].classes,e.value=t.data.datas[0].examId,e.datas=t.data.datas,e.yearTime=t.data.schoolYear}).catch(function(e){console.log(e)})},methods:{querySelect:function querySelect(value){this.value=value,this.active="0",this.tableData3=eval(this.$refs.li[0].firstChild.innerHTML)},queryTableMsg:function(e,t,a){this.tableData3=t,this.active=a},allSelectionChange:function(e){this.multipleSelection=[],this.allSelectMsg=e},handleSelectionChange:function(e){console.log(e),this.allSelectMsg=[],this.multipleSelection=e},handleEdit:function(e,t){console.log(e,t)},handleQuery:function(e,t){this.$router.push({path:"querySubjectScore",query:{examId:this.value,classId:t.classId}}),console.log(e,t)},handleDelete:function(e,t){var a=this;console.log(t);var n=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$ajax("schadmin/deleteScoreByClassIdAndExamId",{classId:t.classId,examId:n.value}).then(function(t){200==t.code?(n.tableData3.splice(e,1),n.$message({type:"success",message:"删除成功!"})):n.$message({type:"info",message:"删除失败！"})}).catch(function(e){console.log(e)})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},batchLoad:function(){var e=this;if(this.allSelectMsg&&this.allSelectMsg.length>0){var t=this.allSelectMsg,a=[];t.forEach(function(e,t){a[t]=e.id}),console.log(a),this.$confirm("您将批量下载选中的文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$ajax("static/scores.json").then(function(e){200==e.code?alert("下载成功！"):$this.$message({type:"info",message:"下载失败！"})}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消操作"})})}else if(this.multipleSelection&&this.multipleSelection.length>0){var n=this.multipleSelection,l=[];n.forEach(function(e,t){l[t]=e.id}),console.log(l),this.$confirm("您将批量下载选中的文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$ajax("static/scores.json").then(function(e){200==e.code?alert("下载成功！"):$this.$message({type:"info",message:"下载失败！"})}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}else alert("未选中文件！")},batchDelete:function(){var e=this,t=this;if(this.allSelectMsg&&this.allSelectMsg.length>0){var a=this.allSelectMsg,n=[];a.forEach(function(e,t){n[t]=e.classId}),n=n.join(),this.$confirm("您将批量删除选中的文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$ajax("schadmin/deleteScoreByClassIdAndExamId",{examId:t.value,classId:n}).then(function(e){200==e.code?(t.$message({type:"success",message:"删除成功!"}),t.tableData3=[],t.allSelectMsg=[],t.multipleSelection=[]):t.$message({type:"info",message:"删除失败！"})}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}else if(this.multipleSelection&&this.multipleSelection.length>0){var l=this.multipleSelection,i=[];l.forEach(function(e,t){i[t]=e.classId}),i=i.join(),this.$confirm("您将批量删除选中的文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$ajax("schadmin/deleteScoreByClassIdAndExamId",{examId:t.value,classId:i}).then(function(e){200==e.code?(t.$message({type:"success",message:"删除成功!"}),l.forEach(function(e,a){t.tableData3.forEach(function(a,n){e==a&&t.tableData3.splice(n,1)})}),t.multipleSelection=[]):t.$message({type:"info",message:"删除失败！"})}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}else alert("未选中文件！")}}}},283:function(e,t,a){t=e.exports=a(182)(),t.push([e.i,".scoreManagement{padding:30px;text-align:left}.textLeft{text-align:left}.cellName{display:inline-block;margin-left:10px}.tabBtn{padding-bottom:30px}.yearTime{text-align:left;margin:30px 0}.selectWrap{margin:0 0 20px}.selectWrap h4{margin-right:20px}.gradeWrap li,.gradeWrap ul,.selectWrap h4{display:inline-block}.gradeWrap li{margin:0 5px;width:100px;height:35px;line-height:35px;border:1px solid grey;border-radius:5px;text-align:center;cursor:pointer}.gradeWrap li:hover{background:#add8e6;color:#fff;border:1px solid transparent}.gradeWrap li.active{background:#6495ed;color:#fff;border:1px solid transparent}.tableWrap{text-align:center;margin-top:20px}.tableWrap th{font-weight:600}.tableWrap .cell{text-align:center}","",{version:3,sources:["E:/works/platform/yitai-educational/src/main/webapp/src/pages/front/schoolRollFiler/scoreManagement.vue"],names:[],mappings:"AACA,iBACE,aAAc,AACd,eAAiB,CAClB,AACD,UACE,eAAiB,CAClB,AACD,UACE,qBAAsB,AACtB,gBAAkB,CACnB,AACD,QACE,mBAAqB,CACtB,AACD,UACE,gBAAiB,AACjB,aAAe,CAChB,AACD,YACE,eAAmB,CACpB,AACD,eAEE,iBAAmB,CACpB,AAID,2CANE,oBAAsB,CAgBvB,AAVD,cACE,aAAc,AAEd,YAAa,AACb,YAAa,AACb,iBAAkB,AAClB,sBAAuB,AACvB,kBAAmB,AACnB,kBAAmB,AACnB,cAAgB,CACjB,AACD,oBACE,mBAAsB,AACtB,WAAa,AACb,4BAAgC,CACjC,AACD,qBACE,mBAA2B,AAC3B,WAAa,AACb,4BAAgC,CACjC,AACD,WACE,kBAAmB,AACnB,eAAiB,CAClB,AACD,cACE,eAAiB,CAClB,AACD,iBACE,iBAAmB,CACpB",file:"scoreManagement.vue",sourcesContent:["\n.scoreManagement {\n  padding: 30px;\n  text-align: left;\n}\n.textLeft{\n  text-align: left;\n}\n.cellName {\n  display: inline-block;\n  margin-left: 10px;\n}\n.tabBtn {\n  padding-bottom: 30px;\n}\n.yearTime{\n  text-align: left;\n  margin: 30px 0;\n}\n.selectWrap{\n  margin: 0 0 20px 0;\n}\n.selectWrap h4{\n  display: inline-block;\n  margin-right: 20px;\n}\n.gradeWrap ul {\n  display: inline-block;\n}\n.gradeWrap li {\n  margin: 0 5px;\n  display: inline-block;\n  width: 100px;\n  height: 35px;\n  line-height: 35px;\n  border: 1px solid grey;\n  border-radius: 5px;\n  text-align: center;\n  cursor: pointer;\n}\n.gradeWrap li:hover {\n  background: lightblue;\n  color: white;\n  border: 1px solid rgba(0,0,0,0);\n}\n.gradeWrap li.active {\n  background: cornflowerblue;\n  color: white;\n  border: 1px solid rgba(0,0,0,0);\n}\n.tableWrap {\n  text-align: center;\n  margin-top: 20px;\n}\n.tableWrap th {\n  font-weight: 600;\n}\n.tableWrap .cell {\n  text-align: center;\n}\n"],sourceRoot:""}])},321:function(e,t,a){var n=a(283);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(183)("e90c53e6",n,!0)},364:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scoreManagement"},[a("div",{staticClass:"tabBtn textLeft"},[a("el-button",{attrs:{type:"primary"}},[e._v("批量导入")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.batchLoad()}}},[e._v("批量下载")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.batchDelete()}}},[e._v("批量删除成绩")])],1),e._v(" "),a("div",{staticClass:"textLeft"},[a("h4",{staticClass:"yearTime"},[e._v("\n      "+e._s(e.yearTime)+"\n    ")])]),e._v(" "),a("div",{staticClass:"selectWrap textLeft"},[a("h4",[e._v("\n       请选择试卷名称:\n    ")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){e.querySelect(e.value)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.datas,function(e){return a("el-option",{key:e.id,attrs:{label:e.examName,value:e.examId}})}))],1),e._v(" "),a("div",{staticClass:"gradeWrap textLeft"},[a("span",[e._v("年级：")]),e._v(" "),e._l(e.datas,function(t,n){return t.examId==e.value?a("ul",e._l(t.grades,function(t,n){return a("li",{ref:"li",refInFor:!0,class:{active:e.active==n},on:{click:function(a){e.queryTableMsg(a,t.classes,n)}}},[a("span",{attrs:{hidden:""}},[e._v(e._s(t.classes))]),e._v("\n        "+e._s(t.gradeName)+"\n      ")])})):e._e()})],2),e._v(" "),a("div",{staticClass:"tableWrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData3,border:"","tooltip-effect":"dark"},on:{"select-all":e.allSelectionChange,select:e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"85"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gradeName",label:"年级",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"className",label:"班级",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"term",label:"学期",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"200"},scopedSlots:e._u([["default",function(t){return[e._v(e._s(t.row.createTime))]}]])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([["default",function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleQuery(t.$index,t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("下载\n          ")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}]])})],1)],1)])},staticRenderFns:[]}},77:function(e,t,a){a(321);var n=a(73)(a(266),a(364),null,null);e.exports=n.exports}});
//# sourceMappingURL=1.85a97e93c5d1d084b2ce.js.map