webpackJsonp([18],{208:function(t,e,n){n(336);var a=n(73)(n(262),n(380),null,null);t.exports=a.exports},221:function(t,e,n){t.exports={default:n(222),__esModule:!0}},222:function(t,e,n){var a=n(10),i=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},262:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(221),i=n.n(a);e.default={name:"querySubjectScore",data:function(){return{examName:"",examId:"",gradeName:"",className:"",schoolYear:"",classId:"",term:"",count:"",tableData:[],oldData:[],hideBtnState:!0,editStatus:!1,queryChangeCount:0,errorMsg:0,loadingStatus:!0}},mounted:function(){var t=this,e=this.$route.query;t.examId=e.examId,t.classId=e.classId,this.$ajax("schadmin/findClassStudentScoreTableByCondition",e).then(function(e){t.tableData=e.data.tableData,t.oldData=e.data.tableData,t.examName=e.data.examName,t.gradeName=e.data.gradeName,t.className=e.data.className,t.schoolYear=e.data.schoolYear,t.term=e.data.term,t.count=e.data.count,t.loadingStatus=!1}).catch(function(t){console.log(t)})},methods:{callBackPages:function(){this.$router.go(-1)},editPages:function(){var t=this;this.$confirm("您将编辑当前的表格, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$refs.input.forEach(function(t,e){var n=t.getAttribute("model");t.disabled=("studentName"==n||"sid"==n)&&"disabled"}),t.editStatus=!0,t.hideBtnState=!1}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},cancelPages:function(){var t=this.tableData;this.$set(this.tableData,t),this.$refs.input.forEach(function(t,e){t.disabled="disabled",t.style.border=""}),this.editStatus=!1,this.hideBtnState=!0,this.errorMsg=0},savePages:function(){var t=this,e=this;if(0==this.queryChangeCount){this.editStatus=!1,this.hideBtnState=!0;return void this.$refs.input.forEach(function(t,e){t.disabled="disabled"})}this.errorMsg>0?this.$alert("您输入修改的成绩格式有误, 一共有"+this.errorMsg+"处，请您修改后从新提交","提示",{confirmButtonText:"确定",callback:function(t){}}):this.$confirm("您将保存当前已编辑过的成绩表格, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n=t.$refs.tr,a=[],r={};n.forEach(function(t,e){var n=t.querySelectorAll("td input");r=new Object,function(t){n.forEach(function(t,e){t.disabled="disabled";var n=t.getAttribute("model"),a=t.value;r[n]=a})}(),a.push(r)}),a=i()(a),t.$ajax("schadmin/updateScoreByClassIdAndExamId",{examId:e.examId,classId:e.classId,schoolYear:e.schoolYear,term:e.term,data:a}).then(function(t){e.$message({type:"success",message:"保存成功!"})}).catch(function(t){e.$message({type:"error",message:"保存失败"})}),a=JSON.parse(a),t.oldData.tableBody=a,t.queryChangeCount=0,t.editStatus=!1,t.hideBtnState=!0}).catch(function(){e.$message({type:"info",message:"已取消操作"})})},queryChangeStatus:function(t){var e=/^(0|\d{1,2}|100)(\.\d)?$/;this.queryChangeCount+=1;var n=t.target.value;e.test(n)?(t.target.style.border="",this.errorMsg-=1):(t.target.style.border="1px solid red",this.errorMsg+=1)}}}},298:function(t,e,n){e=t.exports=n(182)(),e.push([t.i,".querySubjectScore{padding:30px}.callBackBtn{text-align:left}.editBtn{padding-right:30px}.editBtn,.hideBtn{margin:20px 0;text-align:right}.hideStatus{display:none}.scoreTable #table{width:100%;border:1px solid #dfe6ec;margin-top:20px}#table tr,td,th{border-bottom:1px solid #dfe6ec;border-right:1px solid #dfe6ec}#table th{padding:1% .5%;font-size:14px;font-weight:600;text-align:center;background-color:#eef1f6}#table td{box-sizing:border-box;height:30px}#table td:first-child{width:80px}#table td:nth-child(2){width:150px}#table input{box-sizing:border-box;width:100%;height:100%;font-size:16px;text-align:center}.allowEdit{box-sizing:border-box;outline:none;border:1px solid #0c9ee9}.notAllowEdit{border:none;outline:none}.tdName{width:20%}.tdNumber{width:30%}.countWrap{margin:20px 0;text-align:left}.headcount{display:inline-block;text-align:center;width:90px;height:35px;line-height:35px;border-radius:5px;background:#eef1f6;font-size:15px;font-weight:600}.gradeWrap{margin-top:20px}.gradeWrap>div{margin:10px 0;font-weight:600}.gradeWrap>div>p{display:inline-block;margin-left:20px}","",{version:3,sources:["E:/works/platform/yitai-educational/src/main/webapp/src/pages/front/schoolRollFiler/querySubjectScore.vue"],names:[],mappings:"AACA,mBACE,YAAc,CACf,AACD,aACE,eAAiB,CAClB,AACD,SAGE,kBAAoB,CACrB,AACD,kBAJE,cAAe,AACf,gBAAkB,CAMnB,AACD,YACE,YAAc,CACf,AACD,mBACE,WAAY,AACZ,yBAA0B,AAC1B,eAAiB,CAClB,AACD,gBACE,gCAAiC,AACjC,8BAAgC,CACjC,AACD,UACE,eAAiB,AACjB,eAAgB,AAChB,gBAAiB,AACjB,kBAAmB,AACnB,wBAA0B,CAC3B,AACD,UACE,sBAAuB,AACvB,WAAa,CACd,AACD,sBACE,UAAY,CACb,AACD,uBACE,WAAa,CACd,AACD,aACE,sBAAuB,AACvB,WAAY,AACZ,YAAa,AACb,eAAgB,AAChB,iBAAmB,CACpB,AAID,WACE,sBAAuB,AAEvB,aAAc,AACd,wBAA0B,CAC3B,AACD,cACE,YAAa,AACb,YAAc,CACf,AACD,QACE,SAAW,CACZ,AACD,UACE,SAAW,CACZ,AAMD,WACE,cAAe,AACf,eAAiB,CAClB,AACD,WACE,qBAAsB,AACtB,kBAAmB,AACnB,WAAY,AACZ,YAAa,AACb,iBAAkB,AAClB,kBAAmB,AACnB,mBAAoB,AACpB,eAAgB,AAChB,eAAiB,CAClB,AACD,WACE,eAAiB,CAClB,AACD,eACE,cAAe,AACf,eAAiB,CAClB,AACD,iBACE,qBAAsB,AACtB,gBAAkB,CACnB",file:"querySubjectScore.vue",sourcesContent:["\n.querySubjectScore{\n  padding: 30px;\n}\n.callBackBtn {\n  text-align: left;\n}\n.editBtn {\n  margin: 20px 0;\n  text-align: right;\n  padding-right: 30px;\n}\n.hideBtn {\n  margin: 20px 0;\n  text-align: right;\n}\n.hideStatus {\n  display: none;\n}\n.scoreTable #table {\n  width: 100%;\n  border: 1px solid #dfe6ec;\n  margin-top: 20px;\n}\n#table tr,td,th {\n  border-bottom: 1px solid #dfe6ec;\n  border-right: 1px solid #dfe6ec;\n}\n#table th {\n  padding: 1% 0.5%;\n  font-size: 14px;\n  font-weight: 600;\n  text-align: center;\n  background-color: #eef1f6;\n}\n#table td {\n  box-sizing: border-box;\n  height: 30px;\n}\n#table td:nth-child(1) {\n  width: 80px;\n}\n#table td:nth-child(2) {\n  width: 150px;\n}\n#table input {\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  font-size: 16px;\n  text-align: center;\n}\n/*.errorInput {*/\n  /*outline: 1px solid red;*/\n/*}*/\n.allowEdit {\n  box-sizing: border-box;\n  /*border: none;*/\n  outline: none;\n  border: 1px solid #0C9EE9;\n}\n.notAllowEdit{\n  border: none;\n  outline: none;\n}\n.tdName {\n  width: 20%;\n}\n.tdNumber {\n  width: 30%;\n}\n#table input:disabled{\n  /*border:1px solid #DDD;*/\n  /*background-color: white;*/\n  /*color:#ACA899;*/\n}\n.countWrap {\n  margin: 20px 0;\n  text-align: left;\n}\n.headcount {\n  display: inline-block;\n  text-align: center;\n  width: 90px;\n  height: 35px;\n  line-height: 35px;\n  border-radius: 5px;\n  background: #eef1f6;\n  font-size: 15px;\n  font-weight: 600;\n}\n.gradeWrap {\n  margin-top: 20px;\n}\n.gradeWrap > div{\n  margin: 10px 0;\n  font-weight: 600;\n}\n.gradeWrap > div > p {\n  display: inline-block;\n  margin-left: 20px;\n}\n"],sourceRoot:""}])},336:function(t,e,n){var a=n(298);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(183)("68597f25",a,!0)},380:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingStatus,expression:"loadingStatus"}],staticClass:"querySubjectScore"},[n("div",{staticClass:"callBackBtn"},[n("el-button",{attrs:{type:"primary",icon:"arrow-left"},on:{click:t.callBackPages}},[t._v("返回")])],1),t._v(" "),n("div",{staticClass:"gradeWrap"},[n("div",[t._v("考试名称："),n("p",[t._v(t._s(t.examName))])]),t._v(" "),n("div",[t._v("年级："),n("p",[t._v(t._s(t.gradeName))])]),t._v(" "),n("div",[t._v("班级："),n("p",[t._v(t._s(t.className))])])]),t._v(" "),n("div",{staticClass:"editBtn",class:{hideStatus:!t.hideBtnState}},[n("el-button",{attrs:{type:"info"},on:{click:t.editPages}},[t._v("编辑")])],1),t._v(" "),n("div",{staticClass:"hideBtn",class:{hideStatus:t.hideBtnState}},[n("el-button",{attrs:{type:"warning"},on:{click:t.cancelPages}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"success"},on:{click:t.savePages}},[t._v("保存")])],1),t._v(" "),n("div",{staticClass:"scoreTable"},[n("table",{attrs:{id:"table"}},[t._l(t.tableData.tableHeader,function(e){return n("tr",t._l(e,function(e){return n("th",{attrs:{rowspan:e.rowNum,colspan:e.colNum}},[t._v(t._s(e.text))])}))}),t._v(" "),t._l(t.tableData.tableBody,function(e){return n("tr",{ref:"tr",refInFor:!0},t._l(e,function(e,a){return n("td",{directives:[{name:"show",rawName:"v-show",value:"studentId"!=a,expression:"tdKey != 'studentId' "}]},[n("input",{ref:"input",refInFor:!0,class:t.editStatus?"allowEdit":"notAllowEdit",attrs:{maxlength:"4",disabled:"disabled",model:a},domProps:{value:e},on:{change:function(e){t.queryChangeStatus(e)}}})])}))})],2)]),t._v(" "),n("div",{staticClass:"countWrap"},[n("div",{staticClass:"headcount"},[t._v("合计："+t._s(t.count))])])])},staticRenderFns:[]}}});
//# sourceMappingURL=18.985e1002cfcb2a090b5f.js.map