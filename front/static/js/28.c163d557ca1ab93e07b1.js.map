{"version":3,"sources":["webpack:///static/js/28.c163d557ca1ab93e07b1.js","webpack:///./src/pages/front/schoolRollFiler/subjectManagement.vue","webpack:///subjectManagement.vue","webpack:///./src/pages/front/schoolRollFiler/subjectManagement.vue?0c30","webpack:///./src/pages/front/schoolRollFiler/subjectManagement.vue?8d9a","webpack:///./src/pages/front/schoolRollFiler/subjectManagement.vue?85fa"],"names":["webpackJsonp","214","module","exports","__webpack_require__","Component","269","__webpack_exports__","Object","defineProperty","value","name","data","fullscreenLoading","schoolId","gradeId","subjectState","currentGradeId","teachers","grades","dialogVisibleEditTeacher","dialogVisibleAddSubject","teacherEdit","currentTeacherId","subjects","subjectsLenght","oldSubjectsLenght","subjectId","classId","teacherId","adddSubjectId","teachingInfo","subjectInfo","SubjectDBs","mounted","this","getGrade","getSubjects","getTeacher","getTeaching","methods","_this","params","$ajax","then","res","catch","getCurrentGradeId","GradeId","_this2","_this3","_this4","length","getTarget","item","list","console","log","teacherName","teacherSaveData","_this5","code","$message","type","message","getSubjectDB","_this6","addNewSubject","addNewSubjectData","_this7","deleteSubject","isEmptyObject","obj","key","_this8","subjectAll","subjectsSameId","i","j","push","filter","x","$confirm","confirmButtonText","cancelButtonText","$alert","deleteTeacher","_this9","311","version","sources","names","mappings","file","sourcesContent","sourceRoot","349","content","locals","395","render","_vm","_h","$createElement","_c","_self","directives","rawName","expression","modifiers","fullscreen","lock","staticClass","on","change","$event","model","callback","$$v","_l","index","attrs","label","_v","_s","icon","click","_e","subjectName","className","class","fullCell","href","title","close-on-click-modal","size","ref","label-width","placeholder","id","slot","staticRenderFns"],"mappings":"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","file":"static/js/28.c163d557ca1ab93e07b1.js","sourcesContent":["webpackJsonp([28],{\n\n/***/ 214:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(349)\n\nvar Component = __webpack_require__(73)(\n  /* script */\n  __webpack_require__(269),\n  /* template */\n  __webpack_require__(395),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 269:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'subjectManagement',\n  data: function data() {\n    return {\n      fullscreenLoading: false,\n\n      schoolId: '1',\n\n      gradeId: '1',\n\n      subjectState: true,\n\n      currentGradeId: '1',\n\n      teachers: [],\n\n      grades: [],\n\n      dialogVisibleEditTeacher: false,\n      dialogVisibleAddSubject: false,\n\n      teacherEdit: {},\n\n      currentTeacherId: '',\n\n      subjects: [],\n\n      subjectsLenght: '',\n      oldSubjectsLenght: '',\n\n      subjectId: '',\n\n      classId: '',\n\n      teacherId: '',\n\n      adddSubjectId: '',\n\n      teachingInfo: '',\n\n      subjectInfo: '',\n\n      SubjectDBs: []\n    };\n  },\n  mounted: function mounted() {\n    this.getGrade();\n    this.getSubjects();\n    this.getTeacher();\n    this.getTeaching();\n  },\n\n  methods: {\n    getTeacher: function getTeacher() {\n      var _this = this;\n\n      var params = {\n        schoolId: this.schoolId\n      };\n      this.$ajax('/schadmin/getTeacherBySchoolId', params).then(function (res) {\n        _this.teachers = res.data;\n      }).catch(function () {});\n    },\n    getCurrentGradeId: function getCurrentGradeId(GradeId) {\n\n      this.currentGradeId = GradeId;\n\n      this.getTeaching();\n    },\n    getGrade: function getGrade() {\n      var _this2 = this;\n\n      var params = {\n        schoolId: this.schoolId\n      };\n      this.$ajax('/headteacher/findGradeByCurrentUser', params).then(function (res) {\n        _this2.grades = res.data;\n      }).catch(function () {});\n    },\n    getSubjects: function getSubjects() {\n      var _this3 = this;\n\n      var params = {\n        schoolId: this.schoolId,\n        gradeId: this.currentGradeId\n      };\n\n      this.$ajax('/schadmin/findSubjectBySchoolIdAndGradeId', params).then(function (res) {\n\n        _this3.subjects = res.data;\n      }).catch(function () {});\n    },\n    getTeaching: function getTeaching() {\n      var _this4 = this;\n\n      var params = {\n        gradeId: this.currentGradeId\n      };\n\n      this.$ajax('/teacher/findTeaching', params).then(function (res) {\n        _this4.teachingInfo = res.data;\n\n        _this4.subjectInfo = _this4.teachingInfo[0].subjectInfo;\n\n        _this4.oldSubjectsLenght = _this4.subjectsLenght;\n\n        _this4.subjectsLenght = _this4.subjectInfo.length;\n      }).catch(function () {});\n    },\n    getTarget: function getTarget(item, list) {\n      console.log(item, list);\n\n      this.currentTeacherId = list.teachingInfo.teacherName;\n\n      this.classId = item.classId;\n      this.subjectId = list.subjectId;\n\n      this.dialogVisibleEditTeacher = true;\n    },\n    teacherSaveData: function teacherSaveData() {\n      var _this5 = this;\n\n      var params = {\n        classId: this.classId,\n        subjectId: this.subjectId,\n        teacherId: this.currentTeacherId\n      };\n      this.$ajax('/schadmin/saveOrUpdateClassTeacherSubject', params).then(function (res) {\n        if (res.code == 200) {\n          _this5.$message({\n            type: 'success',\n            message: '添加成功!'\n          });\n\n          _this5.getTeaching();\n\n          _this5.dialogVisibleEditTeacher = false;\n        } else {\n          _this5.$message({\n            type: 'error',\n            message: res.message\n          });\n          _this5.dialogVisibleAddSubject = true;\n        }\n      }).catch(function () {});\n    },\n    getSubjectDB: function getSubjectDB() {\n      var _this6 = this;\n\n      var params = {\n        schoolId: this.schoolId,\n        gradeId: this.currentGradeId\n      };\n      this.$ajax('/schadmin/findSubjectDBBySchoolIdAndGradeId', params).then(function (res) {\n\n        _this6.SubjectDBs = res.data;\n      }).catch(function () {});\n    },\n    addNewSubject: function addNewSubject() {\n      this.dialogVisibleAddSubject = true, this.adddSubjectId = '', this.getSubjectDB();\n    },\n    addNewSubjectData: function addNewSubjectData() {\n      var _this7 = this;\n\n      var params = {\n        schoolId: this.schoolId,\n        gradeId: this.currentGradeId,\n        subjectId: this.adddSubjectId\n      };\n      this.$ajax('/schadmin/saveSchoolGradeSubject', params).then(function (res) {\n\n        if (res.code == 200) {\n          _this7.$message({\n            type: 'success',\n            message: '添加成功!'\n          });\n\n          _this7.dialogVisibleAddSubject = false;\n\n          _this7.getTeaching();\n        } else {\n          _this7.$message({\n            type: 'error',\n            message: res.message\n          });\n\n          _this7.dialogVisibleAddSubject = false;\n        }\n      }).catch(function () {});\n    },\n    deleteSubject: function deleteSubject(item) {\n      var _this8 = this;\n\n      var subjectAll = [];\n      var subjectsSameId = [];\n\n      for (var i = 0; i < this.teachingInfo.length; i++) {\n        for (var j = 0; j < this.teachingInfo[i].subjectInfo.length; j++) {\n          subjectAll.push(this.teachingInfo[i].subjectInfo[j]);\n        }\n      }\n\n\n      subjectsSameId = subjectAll.filter(function (x) {\n\n        return x.subjectId == item.subjectId;\n      });\n\n      function isEmptyObject(obj) {\n        for (var key in obj) {\n          return false;\n        }\n        return true;\n      };\n\n      function haveTeacher() {\n        for (var i = 0; i < subjectsSameId.length; i++) {\n\n          if (!isEmptyObject(subjectsSameId[i].teachingInfo) && subjectsSameId[i].teachingInfo.teacherId != 0) {\n\n            return true;\n          }\n        }\n\n        return false;\n      };\n\n      if (haveTeacher()) {\n\n        this.$alert('该学科下存在教师，请先情况教师学科之间的关系。', '提示', {\n          confirmButtonText: '确定'\n        });\n      } else {\n\n        this.$confirm('是否要删除当前科目?', '提示', {\n          type: 'warning',\n          confirmButtonText: '删除',\n          cancelButtonText: '取消'\n        }).then(function () {\n          var params = {\n            schoolId: _this8.schoolId,\n            gradeId: _this8.currentGradeId,\n            subjectId: item.subjectId\n          };\n          _this8.$ajax('/schadmin/deleteSubjectBySchoolIdAndGradeId', params).then(function (res) {\n            if (res.code == 200) {\n              _this8.$message({\n                type: 'success',\n                message: '删除成功!'\n              });\n\n              _this8.getSubjects();\n\n              _this8.subjectsLenght = _this8.subjectInfo.length;\n\n              _this8.dialogVisibleAddSubject = false;\n\n              _this8.getTeaching();\n            } else {\n\n              _this8.$message({\n                type: 'error',\n                message: res.message\n              });\n              _this8.dialogVisibleAddSubject = true;\n            }\n          }).catch(function () {});\n        }).catch(function () {});\n      }\n    },\n    deleteTeacher: function deleteTeacher(list, item) {\n      var _this9 = this;\n\n      this.$confirm('是否要删除当前教师?', '提示', {\n        type: 'warning',\n        confirmButtonText: '删除',\n        cancelButtonText: '取消'\n      }).then(function () {\n        var params = {\n          classId: item.classId,\n          subjectId: list.subjectId\n        };\n        _this9.$ajax('/schadmin/deleteClassTeacherSubjectByCondition', params).then(function (res) {\n          if (res.code == 200) {\n            _this9.$message({\n              type: 'success',\n              message: '删除成功!'\n            });\n\n            _this9.getSubjects();\n            _this9.getTeaching();\n\n            _this9.dialogVisibleAddSubject = false;\n          } else {\n\n            _this9.$message({\n              type: 'error',\n              message: res.message\n            });\n            _this9.dialogVisibleAddSubject = true;\n          }\n        }).catch(function () {});\n      }).catch(function () {});\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 311:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(182)();\n// imports\n\n\n// module\nexports.push([module.i, \".subjectMgt-header{text-align:left;margin-top:10px}.subjectMgt-body{margin-top:10px}.subjectMgt-body-tool{text-align:right}.subjectMgt-body table{width:100%;text-align:center}.subjectMgt-body table th{text-align:center}.subjectMgt-body table td,.subjectMgt-body table th{border:1px solid #dfe6ec;height:40px}.tooltip-warp{position:relative;display:inline-block}.subjectMgt-body table td:hover .tooltip-content,.subjectMgt-body table th:hover .tooltip-content{visibility:visible;opacity:1;-webkit-transition:all .5s;transition:all .5s}.fullCell{display:block;width:100%;height:100%}.tooltip-content{font-size:12px;padding:5px;right:-70px;white-space:nowrap;z-index:1000;background:#1f2d3d;color:#fff;cursor:pointer;visibility:hidden;opacity:0}.tooltip-content,.tooltip-content:after{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.tooltip-content:after{content:\\\"\\\";height:0;width:0;border-width:5px;border-style:dashed solid dashed dashed;border-color:transparent #1f2d3d transparent transparent;left:-10px}\", \"\", {\"version\":3,\"sources\":[\"E:/works/platform/yitai-educational/src/main/webapp/src/pages/front/schoolRollFiler/subjectManagement.vue\"],\"names\":[],\"mappings\":\"AACA,mBACE,gBAAiB,AACjB,eAAiB,CAClB,AACD,iBACE,eAAiB,CAClB,AACD,sBACE,gBAAkB,CACnB,AACD,uBACE,WAAY,AACZ,iBAAmB,CACpB,AACD,0BACE,iBAAmB,CACpB,AACD,oDAEE,yBAA0B,AAC1B,WAAa,CACd,AACD,cACE,kBAAmB,AACnB,oBAAsB,CACvB,AACD,kGAEE,mBAAoB,AACpB,UAAW,AACX,2BAA6B,AAC7B,kBAAoB,CACrB,AACD,UACE,cAAe,AACf,WAAY,AACZ,WAAa,CACd,AACD,iBACE,eAAgB,AAEhB,YAAa,AACb,YAAa,AACb,mBAAoB,AAIpB,aAAc,AACd,mBAAoB,AACpB,WAAY,AACZ,eAAgB,AAChB,kBAAmB,AACnB,SAAW,CACZ,AAKD,wCAlBE,kBAAmB,AAInB,QAAS,AACT,mCAAqC,AAC7B,0BAA6B,CAwBtC,AAZD,uBAEE,WAAY,AACZ,SAAU,AACV,QAAS,AACT,iBAAkB,AAClB,wCAA+C,AAC/C,yDAA+D,AAC/D,UAAY,CAIb\",\"file\":\"subjectManagement.vue\",\"sourcesContent\":[\"\\n.subjectMgt-header{\\n  text-align: left;\\n  margin-top: 10px;\\n}\\n.subjectMgt-body{\\n  margin-top: 10px;\\n}\\n.subjectMgt-body-tool{\\n  text-align: right;\\n}\\n.subjectMgt-body table{\\n  width: 100%;\\n  text-align: center;\\n}\\n.subjectMgt-body table th{\\n  text-align: center;\\n}\\n.subjectMgt-body table th,\\n.subjectMgt-body table td{\\n  border: 1px solid #dfe6ec;\\n  height: 40px;\\n}\\n.tooltip-warp{\\n  position: relative;\\n  display: inline-block;\\n}\\n.subjectMgt-body table th:hover .tooltip-content,\\n.subjectMgt-body table td:hover .tooltip-content{\\n  visibility: visible;\\n  opacity: 1;\\n  -webkit-transition: all 0.5s;\\n  transition:all 0.5s;\\n}\\n.fullCell{\\n  display: block;\\n  width: 100%;\\n  height: 100%;\\n}\\n.tooltip-content{\\n  font-size: 12px;\\n  position: absolute;\\n  padding: 5px;\\n  right: -70px;\\n  white-space: nowrap;\\n  top: 50%;\\n  -webkit-transform: translate(0,-50%);\\n          transform: translate(0,-50%);\\n  z-index: 1000;\\n  background: #1f2d3d;\\n  color: #fff;\\n  cursor: pointer;\\n  visibility: hidden;\\n  opacity: 0;\\n}\\n/* .teacherName{\\n  width: 100%;\\n  height: 100%;\\n} */\\n.tooltip-content:after{\\n  position: absolute; \\n  content: ''; \\n  height: 0; \\n  width: 0; \\n  border-width: 5px; \\n  border-style: dashed solid  dashed    dashed  ;\\n  border-color:  transparent #1f2d3d  transparent   transparent ;\\n  left: -10px;\\n  top: 50%;\\n  -webkit-transform: translate(0,-50%);\\n          transform: translate(0,-50%);\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 349:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(311);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(183)(\"3ac7d390\", content, true);\n\n/***/ }),\n\n/***/ 395:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading.fullscreen.lock\",\n      value: (_vm.fullscreenLoading),\n      expression: \"fullscreenLoading\",\n      modifiers: {\n        \"fullscreen\": true,\n        \"lock\": true\n      }\n    }],\n    staticClass: \"subjectManagement\"\n  }, [_c('div', {\n    staticClass: \"subjectMgt-header\"\n  }, [_c('el-radio-group', {\n    on: {\n      \"change\": function($event) {\n        _vm.getCurrentGradeId(_vm.currentGradeId)\n      }\n    },\n    model: {\n      value: (_vm.currentGradeId),\n      callback: function($$v) {\n        _vm.currentGradeId = $$v\n      },\n      expression: \"currentGradeId\"\n    }\n  }, _vm._l((_vm.grades), function(item, index) {\n    return _c('el-radio-button', {\n      key: index,\n      attrs: {\n        \"label\": item.index\n      }\n    }, [_vm._v(\" \" + _vm._s(item.name) + \" \")])\n  }))], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"subjectMgt-body\"\n  }, [_c('div', {\n    staticClass: \"subjectMgt-body-tool\"\n  }, [(_vm.subjectState) ? _c('el-button', {\n    attrs: {\n      \"type\": \"success\",\n      \"icon\": \"plus\"\n    },\n    on: {\n      \"click\": _vm.addNewSubject\n    }\n  }, [_vm._v(\"新增科目\")]) : _vm._e()], 1), _vm._v(\" \"), _c('table', {\n    staticClass: \"subjectMgt-body\"\n  }, [_c('thead', [_c('tr', [_c('th', [_vm._v(\"班级\")]), _vm._v(\" \"), _vm._l((_vm.subjectInfo), function(item, index) {\n    return _c('th', {\n      key: index\n    }, [_c('div', {\n      staticClass: \"tooltip-warp\"\n    }, [_vm._v(\"\\n              \" + _vm._s(item.subjectName) + \"\\n              \"), _c('div', {\n      staticClass: \"tooltip-content\",\n      on: {\n        \"click\": function($event) {\n          _vm.deleteSubject(item)\n        }\n      }\n    }, [_vm._v(\"删除科目\")])])])\n  })], 2)]), _vm._v(\" \"), _c('tbody', _vm._l((_vm.teachingInfo), function(item, index) {\n    return _c('tr', {\n      key: index\n    }, [_c('td', [_vm._v(\" \" + _vm._s(item.className) + \" \")]), _vm._v(\" \"), _vm._l((item.subjectInfo), function(list, index) {\n      return _c('td', [_c('div', {\n        staticClass: \"tooltip-warp\",\n        class: [{\n          fullCell: !list.teachingInfo.teacherName\n        }]\n      }, [_c('a', {\n        staticClass: \"teacherName\",\n        class: [{\n          fullCell: !list.teachingInfo.teacherName\n        }],\n        attrs: {\n          \"href\": \"javascript:;\"\n        },\n        on: {\n          \"click\": function($event) {\n            _vm.getTarget(item, list)\n          }\n        }\n      }, [_vm._v(_vm._s(list.teachingInfo.teacherName))]), _vm._v(\" \"), (list.teachingInfo.teacherName != '') ? _c('div', {\n        staticClass: \"tooltip-content\",\n        on: {\n          \"click\": function($event) {\n            _vm.deleteTeacher(list, item)\n          }\n        }\n      }, [_vm._v(\"删除教师\")]) : _vm._e()])])\n    })], 2)\n  }))])]), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"教师管理\",\n      \"close-on-click-modal\": false,\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.dialogVisibleEditTeacher),\n      callback: function($$v) {\n        _vm.dialogVisibleEditTeacher = $$v\n      },\n      expression: \"dialogVisibleEditTeacher\"\n    }\n  }, [_c('el-form', {\n    ref: \"teacherEdit\",\n    attrs: {\n      \"model\": _vm.teacherEdit,\n      \"label-width\": \"90px\"\n    }\n  }, [_c('el-select', {\n    attrs: {\n      \"placeholder\": \"请选择\"\n    },\n    model: {\n      value: (_vm.currentTeacherId),\n      callback: function($$v) {\n        _vm.currentTeacherId = $$v\n      },\n      expression: \"currentTeacherId\"\n    }\n  }, _vm._l((_vm.teachers), function(item, index) {\n    return _c('el-option', {\n      key: index,\n      attrs: {\n        \"label\": item.name,\n        \"value\": item.id\n      }\n    })\n  }))], 1), _vm._v(\" \"), _c('span', {\n    staticClass: \"dialog-footer\",\n    slot: \"footer\"\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"info\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.dialogVisibleEditTeacher = false\n      }\n    }\n  }, [_vm._v(\"取 消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"success\"\n    },\n    on: {\n      \"click\": _vm.teacherSaveData\n    }\n  }, [_vm._v(\"保 存\")])], 1)], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"添加科目\",\n      \"close-on-click-modal\": false,\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.dialogVisibleAddSubject),\n      callback: function($$v) {\n        _vm.dialogVisibleAddSubject = $$v\n      },\n      expression: \"dialogVisibleAddSubject\"\n    }\n  }, [_c('el-select', {\n    attrs: {\n      \"placeholder\": \"请选择\"\n    },\n    model: {\n      value: (_vm.adddSubjectId),\n      callback: function($$v) {\n        _vm.adddSubjectId = $$v\n      },\n      expression: \"adddSubjectId\"\n    }\n  }, _vm._l((_vm.SubjectDBs), function(item, index) {\n    return _c('el-option', {\n      key: index,\n      attrs: {\n        \"label\": item.name,\n        \"value\": item.id\n      }\n    })\n  })), _vm._v(\" \"), _c('span', {\n    staticClass: \"dialog-footer\",\n    slot: \"footer\"\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"info\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.dialogVisibleAddSubject = false\n      }\n    }\n  }, [_vm._v(\"取 消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"success\"\n    },\n    on: {\n      \"click\": _vm.addNewSubjectData\n    }\n  }, [_vm._v(\"保 存\")])], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/28.c163d557ca1ab93e07b1.js","\n/* styles */\nrequire(\"!!../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-c94053d6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./subjectManagement.vue\")\n\nvar Component = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./subjectManagement.vue\"),\n  /* template */\n  require(\"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c94053d6\\\"}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./subjectManagement.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/front/schoolRollFiler/subjectManagement.vue\n// module id = 214\n// module chunks = 28","<template>\n  <div class=\"subjectManagement\" v-loading.fullscreen.lock=\"fullscreenLoading\">\n    <div class=\"subjectMgt-header\">\n      <el-radio-group v-model=\"currentGradeId\" @change=\"getCurrentGradeId(currentGradeId)\">\n        <el-radio-button v-for=\"(item,index) in grades\" :label=\"item.index\" :key=\"index\"> {{item.name}} </el-radio-button>\n        <!-- <el-radio-button label=\"2\">二年级</el-radio-button>\n        <el-radio-button label=\"3\">三年级</el-radio-button>\n        <el-radio-button label=\"4\">四年级</el-radio-button>\n        <el-radio-button label=\"5\">五年级</el-radio-button>\n        <el-radio-button label=\"6\">六年级</el-radio-button> -->\n      </el-radio-group>\n      <!-- <el-radio-group v-model=\"middleSchoolVal\">\n        <el-radio-button label=\"7\">初一</el-radio-button>\n        <el-radio-button label=\"8\">初二</el-radio-button>\n        <el-radio-button label=\"9\">初三</el-radio-button>\n      </el-radio-group> -->\n    </div>\n\n    <div class=\"subjectMgt-body\">\n      <div class=\"subjectMgt-body-tool\">\n        <el-button type=\"success\" @click=\"addNewSubject\"  icon=\"plus\" v-if=\"subjectState\">新增科目</el-button>\n      </div>\n\n      <!-- <ul v-for=\"(item,index) in grades\" v-if=\" item.gradeId==currentGradeId \">\n        <li>\n      \n          {{ item }} -------\n      \n          <span v-for=\"className in item.classInfo\">\n            {{ className }}\n          </span>\n        </li>\n      </ul> -->\n\n      <table class=\"subjectMgt-body\">\n        <thead>\n          <tr>\n            <th>班级</th>\n\n            <th v-for=\"(item,index) in subjectInfo \" :key=\"index\">\n              <!-- <el-tooltip  content=\"删除科目\" placement=\"right\">\n                  <el-button type=\"text\" @click=\"deleteSubject(item)\">{{ item.subjectName }}</el-button>\n              </el-tooltip> -->\n              <div class=\"tooltip-warp\">\n                {{ item.subjectName }}\n                <div class=\"tooltip-content\" @click=\"deleteSubject(item)\">删除科目</div>\n              </div>\n             </th>\n\n\n\n\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(item,index) in teachingInfo\" :key=\"index\">\n            <td> {{item.className}} </td>\n            <td v-for=\"(list,index) in item.subjectInfo\"  >\n              <!-- <el-tooltip  content=\"删除教师\" placement=\"right\">\n                <el-button type=\"text\" @click=\"deleteTeacher(item)\">{{ list.teachingInfo.teacherName }}</el-button>\n              </el-tooltip> -->\n\n              <div class=\"tooltip-warp\" :class=\"[{ fullCell: !list.teachingInfo.teacherName }]\">\n\n                <a href=\"javascript:;\" class=\"teacherName\" @click=\"getTarget(item,list)\" :class=\"[{ fullCell: !list.teachingInfo.teacherName }]\">{{ list.teachingInfo.teacherName }}</a>\n                <div class=\"tooltip-content\" @click=\"deleteTeacher(list,item)\" v-if=\" list.teachingInfo.teacherName != '' \">删除教师</div>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <el-dialog title=\"教师管理\" v-model=\"dialogVisibleEditTeacher\"  :close-on-click-modal=\"false\" size=\"tiny\" >\n      <el-form ref=\"teacherEdit\" :model=\"teacherEdit\" label-width=\"90px\">\n      <!-- :filter-method=\"\" -->\n          <el-select v-model=\"currentTeacherId\"   placeholder=\"请选择\">\n            <el-option\n              v-for=\" (item,index) in teachers\"\n              :label=\"item.name\"\n              :value=\"item.id\"\n              :key=\"index\"\n              >\n            </el-option>\n          </el-select>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"info\" @click=\"dialogVisibleEditTeacher = false\">取 消</el-button>\n        <el-button type=\"success\" @click=\"teacherSaveData\">保 存</el-button>\n      </span>\n    </el-dialog>\n\n    <el-dialog title=\"添加科目\" v-model=\"dialogVisibleAddSubject\"  :close-on-click-modal=\"false\" size=\"tiny\" >\n      <el-select v-model=\"adddSubjectId\"   placeholder=\"请选择\">\n        <el-option\n          v-for=\"(item,index) in SubjectDBs\"\n          :label=\"item.name\"\n          :value=\"item.id\"\n          :key=\"index\"\n          >\n        </el-option>\n      </el-select>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"info\" @click=\"dialogVisibleAddSubject = false\">取 消</el-button>\n        <el-button type=\"success\" @click=\"addNewSubjectData\">保 存</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'subjectManagement',\n    data () {\n      return{\n        // 全屏遮罩层\n        fullscreenLoading: false,\n        // 默认学校\n        schoolId:'1',\n        // 默认年级\n        gradeId:'1',\n        // 是否删除了当前科目\n        subjectState: true,\n        // 选择当前年级\n        currentGradeId:'1',\n        // 教师\n        teachers:[],\n        // 年级\n        grades:[],\n\n        dialogVisibleEditTeacher:false,\n        dialogVisibleAddSubject:false,\n\n        // 编辑教师\n        teacherEdit:{},\n        // 选中当前教师id\n        currentTeacherId:'',\n\n        // 获取科目\n        subjects:[],\n        // 科目数量\n        subjectsLenght:'',\n        oldSubjectsLenght:'',\n        // 科目id\n        subjectId:'',\n        // 班级id\n        classId:'',\n        // 教师id\n        teacherId:'',\n        // 添加科目id\n        adddSubjectId:'',\n        // 选取教师\n        teachingInfo:'',\n        // 获取班级的科目名称\n        subjectInfo:'',\n\n        // 获取科目数量\n        SubjectDBs:[],\n      }\n    },\n    mounted(){\n      this.getGrade()\n      this.getSubjects()\n      this.getTeacher()\n      this.getTeaching()\n      \n    },\n    methods:{\n    \n      // 获取教师\n      getTeacher(){\n        let params={\n          schoolId:this.schoolId\n        };\n        this.$ajax('/schadmin/getTeacherBySchoolId',params)\n\n        .then(res => {\n            this.teachers=res.data;\n\n            \n\n        }).catch(() => {\n\n        });\n      },\n      // 获取当前年级\n      getCurrentGradeId(GradeId){\n\n        this.currentGradeId= GradeId\n\n\n        this.getTeaching()\n\n        // this.getSubjects()\n\n        // console.log(this.currentGradeId)\n      },\n      // 年级列表\n      getGrade(){\n        let params={\n          schoolId:this.schoolId\n        };\n        this.$ajax('/headteacher/findGradeByCurrentUser',params)\n\n        .then(res => {\n            this.grades=res.data;\n\n        }).catch(() => {\n\n        });\n      },\n      \n      // 获取科目\n      getSubjects(){\n\n        let params={\n          schoolId:this.schoolId,\n          gradeId:this.currentGradeId\n        };\n\n        this.$ajax('/schadmin/findSubjectBySchoolIdAndGradeId',params)\n\n        .then(res => {\n\n            this.subjects=res.data;\n\n            // this.subjectsLenght = this.subjects.length;\n\n        }).catch(() => {\n\n        });\n      },\n      // 查询教学信息\n      getTeaching(){\n\n        let params={\n          gradeId:this.currentGradeId\n        };\n\n        this.$ajax('/teacher/findTeaching',params)\n\n        .then(res => {\n            this.teachingInfo=res.data;\n\n            this.subjectInfo=this.teachingInfo[0].subjectInfo;\n\n            this.oldSubjectsLenght = this.subjectsLenght;\n\n            this.subjectsLenght = this.subjectInfo.length;\n\n\n        }).catch(() => {\n\n        });\n      },\n      // 获取当前点击对象\n      getTarget(item,list){\n        console.log(item,list)\n        \n        this.currentTeacherId= list.teachingInfo.teacherName;\n\n\n        this.classId= item.classId;\n        this.subjectId= list.subjectId;\n\n        this.dialogVisibleEditTeacher=true;\n\n        // console.log(item.classId,list.subjectId)\n        // console.log(item)\n      },\n      // 保存选择教师\n      teacherSaveData(){\n\n        let params={\n          classId : this.classId,\n          subjectId: this.subjectId,\n          teacherId: this.currentTeacherId\n        };\n        this.$ajax('/schadmin/saveOrUpdateClassTeacherSubject',params)\n\n        .then(res => {\n              if(res.code == 200){\n                this.$message({\n                  type: 'success',\n                  message: '添加成功!'\n                });\n\n\n                this.getTeaching()\n\n                this.dialogVisibleEditTeacher=false;\n\n\n              }else{\n                this.$message({\n                  type: 'error',\n                  message: res.message\n                });\n                this.dialogVisibleAddSubject = true;\n              }\n\n        }).catch(() => {\n\n        });\n\n      },\n      // 查询科目字典表\n      getSubjectDB(){\n        let params={\n          schoolId:this.schoolId,\n          gradeId: this.currentGradeId\n        };\n        this.$ajax('/schadmin/findSubjectDBBySchoolIdAndGradeId',params)\n\n        .then(res => {\n\n            this.SubjectDBs=res.data;\n\n        }).catch(() => {\n\n        });\n      },\n      // 添加科目\n      addNewSubject(){\n        this.dialogVisibleAddSubject=true,\n        this.adddSubjectId='',\n        this.getSubjectDB()\n      },\n      // 确定添加科目\n      addNewSubjectData(){\n        let params={\n          schoolId: this.schoolId,\n          gradeId : this.currentGradeId,\n          subjectId: this.adddSubjectId\n        };\n        this.$ajax('/schadmin/saveSchoolGradeSubject',params)\n\n        .then(res => {\n\n              if(res.code == 200){\n                this.$message({\n                  type: 'success',\n                  message: '添加成功!'\n                });\n\n\n                this.dialogVisibleAddSubject = false;\n\n                this.getTeaching()\n\n              }else{\n                this.$message({\n                  type: 'error',\n                  message: res.message\n                });\n\n                this.dialogVisibleAddSubject = false;\n              }\n\n        }).catch(() => {\n\n        });\n      },\n      // 删除学科\n      \n      deleteSubject(item){\n        \n\n        // 获取全部科目\n        let subjectAll=[];\n        let subjectsSameId=[];\n\n        for (var i = 0; i < this.teachingInfo.length; i++) {\n                for (var j = 0; j < this.teachingInfo[i].subjectInfo.length; j++) {\n                    subjectAll.push(this.teachingInfo[i].subjectInfo[j])\n                }\n        }\n        // 科目相同的id\n      \n        subjectsSameId =subjectAll.filter(function(x){\n\n            return x.subjectId ==  item.subjectId\n        });\n\n\n        // 判断是否是空对象\n        function isEmptyObject(obj) {\n          for (var key in obj) {\n            return false;\n          }\n          return true;\n        };\n\n        // 判断相同科目是否有老师\n        function haveTeacher() {\n               for (var i = 0; i < subjectsSameId.length; i++) {\n                \n                if (!isEmptyObject( subjectsSameId[i].teachingInfo ) && subjectsSameId[i].teachingInfo.teacherId != 0 ) {\n                  \n                    return true\n                }\n            }\n\n            return false;\n\n        };\n\n        if( haveTeacher() ){\n\n          this.$alert('该学科下存在教师，请先情况教师学科之间的关系。', '提示', {\n                    confirmButtonText: '确定',\n                  });\n\n\n        }else{\n\n          this.$confirm('是否要删除当前科目?', '提示', {\n            type: 'warning',\n            confirmButtonText: '删除',\n            cancelButtonText: '取消',\n          }).then(() => {\n            let params={\n              schoolId:this.schoolId,\n              gradeId :this.currentGradeId,\n              subjectId: item.subjectId\n            };\n            this.$ajax('/schadmin/deleteSubjectBySchoolIdAndGradeId',params)\n\n            .then(res => {\n                  if(res.code == 200){\n                    this.$message({\n                      type: 'success',\n                      message: '删除成功!'\n                    });\n\n\n                    this.getSubjects()\n\n                    \n\n                    this.subjectsLenght = this.subjectInfo.length;\n\n                    this.dialogVisibleAddSubject = false;\n\n                    /*if(this.oldSubjectsLenght == this.subjectsLenght){\n\n                      this.subjectState=false\n\n                    }else{\n\n                      this.subjectState=true\n\n                    }*/\n\n                    this.getTeaching()\n\n                  }else{\n\n                    this.$message({\n                      type: 'error',\n                      message: res.message\n                    });\n                    this.dialogVisibleAddSubject = true;\n                  }\n\n            }).catch(() => {\n\n            });\n          }).catch(() => {\n\n            });\n        }\n\n        \n      },\n      \n      // 删除当前选中教师\n      deleteTeacher(list,item){\n        // console.log(list, item )\n        this.$confirm('是否要删除当前教师?', '提示', {\n          type: 'warning',\n          confirmButtonText: '删除',\n          cancelButtonText: '取消',\n        }).then(() => {\n          let params={\n            classId :item.classId,\n            subjectId: list.subjectId\n          };\n          this.$ajax('/schadmin/deleteClassTeacherSubjectByCondition',params)\n\n          .then(res => {\n                if(res.code == 200){\n                  this.$message({\n                    type: 'success',\n                    message: '删除成功!'\n                  });\n\n\n                  this.getSubjects()\n                  this.getTeaching()\n\n                  this.dialogVisibleAddSubject = false;\n\n\n                }else{\n\n                  this.$message({\n                    type: 'error',\n                    message: res.message\n                  });\n                  this.dialogVisibleAddSubject = true;\n                }\n\n          }).catch(() => {\n\n          });\n        }).catch(() => {\n\n          });\n      }\n\n    }\n  }\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\n.subjectMgt-header{\n  text-align: left;\n  margin-top: 10px;\n}\n.subjectMgt-body{\n  margin-top: 10px;\n}\n.subjectMgt-body-tool{\n  text-align: right;\n}\n.subjectMgt-body table{\n  width: 100%;\n  text-align: center;\n}\n.subjectMgt-body table th{\n  text-align: center;\n}\n.subjectMgt-body table th,\n.subjectMgt-body table td{\n  border: 1px solid #dfe6ec;\n  height: 40px;\n}\n\n\n.tooltip-warp{\n  position: relative;\n  display: inline-block;\n}\n.subjectMgt-body table th:hover .tooltip-content,\n.subjectMgt-body table td:hover .tooltip-content{\n  visibility: visible;\n  opacity: 1;\n  transition:all 0.5s;\n}\n.fullCell{\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n.tooltip-content{\n  font-size: 12px;\n  position: absolute;\n  padding: 5px;\n  right: -70px;\n  white-space: nowrap;\n  top: 50%;\n  transform: translate(0,-50%);\n  z-index: 1000;\n  background: #1f2d3d;\n  color: #fff;\n  cursor: pointer;\n  visibility: hidden;\n  opacity: 0;\n}\n/* .teacherName{\n  width: 100%;\n  height: 100%;\n} */\n.tooltip-content:after{\n  position: absolute; \n  content: ''; \n  height: 0; \n  width: 0; \n  border-width: 5px; \n  border-style: dashed solid  dashed    dashed  ;\n  border-color:  transparent #1f2d3d  transparent   transparent ;\n  left: -10px;\n  top: 50%;\n  transform: translate(0,-50%);\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// subjectManagement.vue?b8ab2932","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".subjectMgt-header{text-align:left;margin-top:10px}.subjectMgt-body{margin-top:10px}.subjectMgt-body-tool{text-align:right}.subjectMgt-body table{width:100%;text-align:center}.subjectMgt-body table th{text-align:center}.subjectMgt-body table td,.subjectMgt-body table th{border:1px solid #dfe6ec;height:40px}.tooltip-warp{position:relative;display:inline-block}.subjectMgt-body table td:hover .tooltip-content,.subjectMgt-body table th:hover .tooltip-content{visibility:visible;opacity:1;-webkit-transition:all .5s;transition:all .5s}.fullCell{display:block;width:100%;height:100%}.tooltip-content{font-size:12px;padding:5px;right:-70px;white-space:nowrap;z-index:1000;background:#1f2d3d;color:#fff;cursor:pointer;visibility:hidden;opacity:0}.tooltip-content,.tooltip-content:after{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.tooltip-content:after{content:\\\"\\\";height:0;width:0;border-width:5px;border-style:dashed solid dashed dashed;border-color:transparent #1f2d3d transparent transparent;left:-10px}\", \"\", {\"version\":3,\"sources\":[\"E:/works/platform/yitai-educational/src/main/webapp/src/pages/front/schoolRollFiler/subjectManagement.vue\"],\"names\":[],\"mappings\":\"AACA,mBACE,gBAAiB,AACjB,eAAiB,CAClB,AACD,iBACE,eAAiB,CAClB,AACD,sBACE,gBAAkB,CACnB,AACD,uBACE,WAAY,AACZ,iBAAmB,CACpB,AACD,0BACE,iBAAmB,CACpB,AACD,oDAEE,yBAA0B,AAC1B,WAAa,CACd,AACD,cACE,kBAAmB,AACnB,oBAAsB,CACvB,AACD,kGAEE,mBAAoB,AACpB,UAAW,AACX,2BAA6B,AAC7B,kBAAoB,CACrB,AACD,UACE,cAAe,AACf,WAAY,AACZ,WAAa,CACd,AACD,iBACE,eAAgB,AAEhB,YAAa,AACb,YAAa,AACb,mBAAoB,AAIpB,aAAc,AACd,mBAAoB,AACpB,WAAY,AACZ,eAAgB,AAChB,kBAAmB,AACnB,SAAW,CACZ,AAKD,wCAlBE,kBAAmB,AAInB,QAAS,AACT,mCAAqC,AAC7B,0BAA6B,CAwBtC,AAZD,uBAEE,WAAY,AACZ,SAAU,AACV,QAAS,AACT,iBAAkB,AAClB,wCAA+C,AAC/C,yDAA+D,AAC/D,UAAY,CAIb\",\"file\":\"subjectManagement.vue\",\"sourcesContent\":[\"\\n.subjectMgt-header{\\n  text-align: left;\\n  margin-top: 10px;\\n}\\n.subjectMgt-body{\\n  margin-top: 10px;\\n}\\n.subjectMgt-body-tool{\\n  text-align: right;\\n}\\n.subjectMgt-body table{\\n  width: 100%;\\n  text-align: center;\\n}\\n.subjectMgt-body table th{\\n  text-align: center;\\n}\\n.subjectMgt-body table th,\\n.subjectMgt-body table td{\\n  border: 1px solid #dfe6ec;\\n  height: 40px;\\n}\\n.tooltip-warp{\\n  position: relative;\\n  display: inline-block;\\n}\\n.subjectMgt-body table th:hover .tooltip-content,\\n.subjectMgt-body table td:hover .tooltip-content{\\n  visibility: visible;\\n  opacity: 1;\\n  -webkit-transition: all 0.5s;\\n  transition:all 0.5s;\\n}\\n.fullCell{\\n  display: block;\\n  width: 100%;\\n  height: 100%;\\n}\\n.tooltip-content{\\n  font-size: 12px;\\n  position: absolute;\\n  padding: 5px;\\n  right: -70px;\\n  white-space: nowrap;\\n  top: 50%;\\n  -webkit-transform: translate(0,-50%);\\n          transform: translate(0,-50%);\\n  z-index: 1000;\\n  background: #1f2d3d;\\n  color: #fff;\\n  cursor: pointer;\\n  visibility: hidden;\\n  opacity: 0;\\n}\\n/* .teacherName{\\n  width: 100%;\\n  height: 100%;\\n} */\\n.tooltip-content:after{\\n  position: absolute; \\n  content: ''; \\n  height: 0; \\n  width: 0; \\n  border-width: 5px; \\n  border-style: dashed solid  dashed    dashed  ;\\n  border-color:  transparent #1f2d3d  transparent   transparent ;\\n  left: -10px;\\n  top: 50%;\\n  -webkit-transform: translate(0,-50%);\\n          transform: translate(0,-50%);\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-c94053d6\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/front/schoolRollFiler/subjectManagement.vue\n// module id = 311\n// module chunks = 28","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-c94053d6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./subjectManagement.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"3ac7d390\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-c94053d6\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/front/schoolRollFiler/subjectManagement.vue\n// module id = 349\n// module chunks = 28","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading.fullscreen.lock\",\n      value: (_vm.fullscreenLoading),\n      expression: \"fullscreenLoading\",\n      modifiers: {\n        \"fullscreen\": true,\n        \"lock\": true\n      }\n    }],\n    staticClass: \"subjectManagement\"\n  }, [_c('div', {\n    staticClass: \"subjectMgt-header\"\n  }, [_c('el-radio-group', {\n    on: {\n      \"change\": function($event) {\n        _vm.getCurrentGradeId(_vm.currentGradeId)\n      }\n    },\n    model: {\n      value: (_vm.currentGradeId),\n      callback: function($$v) {\n        _vm.currentGradeId = $$v\n      },\n      expression: \"currentGradeId\"\n    }\n  }, _vm._l((_vm.grades), function(item, index) {\n    return _c('el-radio-button', {\n      key: index,\n      attrs: {\n        \"label\": item.index\n      }\n    }, [_vm._v(\" \" + _vm._s(item.name) + \" \")])\n  }))], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"subjectMgt-body\"\n  }, [_c('div', {\n    staticClass: \"subjectMgt-body-tool\"\n  }, [(_vm.subjectState) ? _c('el-button', {\n    attrs: {\n      \"type\": \"success\",\n      \"icon\": \"plus\"\n    },\n    on: {\n      \"click\": _vm.addNewSubject\n    }\n  }, [_vm._v(\"新增科目\")]) : _vm._e()], 1), _vm._v(\" \"), _c('table', {\n    staticClass: \"subjectMgt-body\"\n  }, [_c('thead', [_c('tr', [_c('th', [_vm._v(\"班级\")]), _vm._v(\" \"), _vm._l((_vm.subjectInfo), function(item, index) {\n    return _c('th', {\n      key: index\n    }, [_c('div', {\n      staticClass: \"tooltip-warp\"\n    }, [_vm._v(\"\\n              \" + _vm._s(item.subjectName) + \"\\n              \"), _c('div', {\n      staticClass: \"tooltip-content\",\n      on: {\n        \"click\": function($event) {\n          _vm.deleteSubject(item)\n        }\n      }\n    }, [_vm._v(\"删除科目\")])])])\n  })], 2)]), _vm._v(\" \"), _c('tbody', _vm._l((_vm.teachingInfo), function(item, index) {\n    return _c('tr', {\n      key: index\n    }, [_c('td', [_vm._v(\" \" + _vm._s(item.className) + \" \")]), _vm._v(\" \"), _vm._l((item.subjectInfo), function(list, index) {\n      return _c('td', [_c('div', {\n        staticClass: \"tooltip-warp\",\n        class: [{\n          fullCell: !list.teachingInfo.teacherName\n        }]\n      }, [_c('a', {\n        staticClass: \"teacherName\",\n        class: [{\n          fullCell: !list.teachingInfo.teacherName\n        }],\n        attrs: {\n          \"href\": \"javascript:;\"\n        },\n        on: {\n          \"click\": function($event) {\n            _vm.getTarget(item, list)\n          }\n        }\n      }, [_vm._v(_vm._s(list.teachingInfo.teacherName))]), _vm._v(\" \"), (list.teachingInfo.teacherName != '') ? _c('div', {\n        staticClass: \"tooltip-content\",\n        on: {\n          \"click\": function($event) {\n            _vm.deleteTeacher(list, item)\n          }\n        }\n      }, [_vm._v(\"删除教师\")]) : _vm._e()])])\n    })], 2)\n  }))])]), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"教师管理\",\n      \"close-on-click-modal\": false,\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.dialogVisibleEditTeacher),\n      callback: function($$v) {\n        _vm.dialogVisibleEditTeacher = $$v\n      },\n      expression: \"dialogVisibleEditTeacher\"\n    }\n  }, [_c('el-form', {\n    ref: \"teacherEdit\",\n    attrs: {\n      \"model\": _vm.teacherEdit,\n      \"label-width\": \"90px\"\n    }\n  }, [_c('el-select', {\n    attrs: {\n      \"placeholder\": \"请选择\"\n    },\n    model: {\n      value: (_vm.currentTeacherId),\n      callback: function($$v) {\n        _vm.currentTeacherId = $$v\n      },\n      expression: \"currentTeacherId\"\n    }\n  }, _vm._l((_vm.teachers), function(item, index) {\n    return _c('el-option', {\n      key: index,\n      attrs: {\n        \"label\": item.name,\n        \"value\": item.id\n      }\n    })\n  }))], 1), _vm._v(\" \"), _c('span', {\n    staticClass: \"dialog-footer\",\n    slot: \"footer\"\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"info\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.dialogVisibleEditTeacher = false\n      }\n    }\n  }, [_vm._v(\"取 消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"success\"\n    },\n    on: {\n      \"click\": _vm.teacherSaveData\n    }\n  }, [_vm._v(\"保 存\")])], 1)], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": \"添加科目\",\n      \"close-on-click-modal\": false,\n      \"size\": \"tiny\"\n    },\n    model: {\n      value: (_vm.dialogVisibleAddSubject),\n      callback: function($$v) {\n        _vm.dialogVisibleAddSubject = $$v\n      },\n      expression: \"dialogVisibleAddSubject\"\n    }\n  }, [_c('el-select', {\n    attrs: {\n      \"placeholder\": \"请选择\"\n    },\n    model: {\n      value: (_vm.adddSubjectId),\n      callback: function($$v) {\n        _vm.adddSubjectId = $$v\n      },\n      expression: \"adddSubjectId\"\n    }\n  }, _vm._l((_vm.SubjectDBs), function(item, index) {\n    return _c('el-option', {\n      key: index,\n      attrs: {\n        \"label\": item.name,\n        \"value\": item.id\n      }\n    })\n  })), _vm._v(\" \"), _c('span', {\n    staticClass: \"dialog-footer\",\n    slot: \"footer\"\n  }, [_c('el-button', {\n    attrs: {\n      \"type\": \"info\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.dialogVisibleAddSubject = false\n      }\n    }\n  }, [_vm._v(\"取 消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"success\"\n    },\n    on: {\n      \"click\": _vm.addNewSubjectData\n    }\n  }, [_vm._v(\"保 存\")])], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-c94053d6\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/pages/front/schoolRollFiler/subjectManagement.vue\n// module id = 395\n// module chunks = 28"],"sourceRoot":""}